{"version":3,"sources":["../../../src/configs/webpack/react.webpack.config.js"],"names":["reactBabelPresets","reactBabelPlugin","RHL_patch","spa","entry","rules","plugins","server","target","output","filename","libraryTarget","optimize","LimitChunkCountPlugin","maxChunks","BannerPlugin","banner","raw","entryOnly","externals","whitelist","devtool","node","console","global","process","Buffer","__filename","__dirname"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;AASA;;;;AACA;;AACA;;AACA;;AACA;;;;AACA;;AACA;;;;AAEA,MAAMA,oBAAoB;AACxB;AACA;AACA,OAHwB;;AAKxB;AACA;AACA;AACA;AACA,IAAG,kCAAe,CAAC,gBAAD,CAAf,GAAoC,EAAvC,CATwB,CAA1B;;AAYA,MAAMC,mBAAmB;AACvB;AACA;AACA,IAAG,kCAAe,CAAC,mBAAD,CAAf,GAAuC,EAA1C,CAHuB;;AAKvB;AACA,IAAG,+DAAyB,CAAC,wBAAD,CAAzB,GAAsD,EAAzD,CANuB;;AAQvB;AACA;AACA,IAAG,mCAAgB,CAAC,4BAAD,CAAhB,GAAiD,EAApD,CAVuB;;AAYvB;AACA;AACA,IAAG,mCAAgB,CAAC,0BAAD,CAAhB,GAA+C,EAAlD,CAduB,CAAzB;;AAiBA,MAAMC,YAAY,2BAAQ,CAAC,wBAAD,CAAR,GAAqC,EAAvD;;AAEA,MAAMC,MAAM,8BAAqB;AAC/BC,SAAO,kCAAe,4BAAgB,CACpC,GAAGF,SADiC,CAAhB,CAAf,GAEF,qBAAS,CACZ,GAAGA,SADS,CAAT,CAH0B;AAM/BG,SAAO,CACL,qBACE,cADF,EAEEL,iBAFF,EAGEC,gBAHF,kCAKE,CAAC,cAAD,EAAiB,SAAjB,CALF,CADK,EAQL,wBARK,EASL,wBATK,EAUL,kBAVK,CANwB;AAkB/BK,WAAS,CACP,yBADO,EAEP,GAAG,sBAFI,EAGP,GAAG,cAHI,EAIP,GAAG,iBAJI,EAKP,GAAG,wBALI,EAMP,GAAG,2BANI;AAlBsB,CAArB,CAAZ;;AA4BA,MAAMC,SAAS,8BAAqB;AAClCH,SAAO,yBAD2B;AAElCI,UAAQ,MAF0B;AAGlCC,UAAQ;AACNC,+CADM;AAENC,mBAAe;AAFT,GAH0B;AAOlCN,SAAO;AACL;AACA,uBACE,cADF,EAEEL,iBAFF,EAGEC,gBAHF,oCAFK,EAQL,wBARK,EASL,wBATK,EAUL,kBAVK,CAP2B;AAmBlCK,WAAS;;AAEP;AACA;AACA,MAAI,kBAAQM,QAAR,CAAiBC,qBAArB,CAA2C,EAACC,WAAW,CAAZ,EAA3C,CAJO;;AAMP;AACA;AACA,MAAI,kBAAQC,YAAZ,CAAyB;AACvBC,YAAQ,0CADe;AAEvBC,SAAK,IAFkB;AAGvBC,eAAW;AAHY,GAAzB,CARO,CAnByB;AAiClCC,aAAW,CACT,oBADS,EAET,oBAFS,EAGT,oCAAc;AACZC,eAAW;AADC,GAAd,CAHS,CAjCuB;AAwClCC,WAAS,mCAAgB,yBAAhB,GAA4C,YAxCnB;AAyClCC,QAAM;AACJC,aAAS,KADL;AAEJC,YAAQ,KAFJ;AAGJC,aAAS,KAHL;AAIJC,YAAQ,KAJJ;AAKJC,gBAAY,KALR;AAMJC,eAAW;AANP;AAzC4B,CAArB,CAAf;;kBAmDe,kCAAe,CAACzB,GAAD,EAAMI,MAAN,CAAf,GAA+BJ,G","file":"react.webpack.config.js","sourcesContent":["import webpack from 'webpack';\nimport nodeExternals from 'webpack-node-externals';\nimport {\n  babelEnvServer,\n  babelEnvSpa,\n  filenameServer,\n  isDevelopment,\n  isIsomorphic,\n  isProduction,\n  isRHL\n} from '../prepare.build-tools.config';\nimport generalWebpackConfig from './general.webpack.config';\nimport { isomorphicEntry, serverEntry, spaEntry } from './general/entry';\nimport { extractCSS } from './plugins/css';\nimport { extractVendors, getAssetsFile, getIndexHtmlFile, HMR, uglify } from './plugins/js';\nimport babelRules from './rules/babel';\nimport { externalCSS, internalCSS } from './rules/css';\nimport { file } from './rules/files';\n\nconst reactBabelPresets = [\n  // JSX, Flow\n  // https://github.com/babel/babel/tree/master/packages/babel-preset-react\n  'react',\n\n  // Optimize React code for the production build\n  // https://github.com/thejameskyle/babel-react-optimize\n  // https://github.com/thejameskyle/babel-react-optimize#transform-react-inline-elements\n  // Note: You should use this with babel-runtime and babel-transform-runtime to avoid duplicating the helper code in every file.\n  ...isProduction ? ['react-optimize'] : [],\n];\n\nconst reactBabelPlugin = [\n  // https://www.npmjs.com/package/babel-plugin-transform-runtime\n  // Note: You should use this with babel-runtime and babel-transform-runtime to avoid duplicating the helper code in every file.\n  ...isProduction ? ['transform-runtime'] : [],\n\n  // http://gaearon.github.io/react-hot-loader/getstarted/\n  ...isDevelopment && isRHL ? ['react-hot-loader/babel'] : [],\n\n  // Adds component stack to warning messages\n  // https://github.com/babel/babel/tree/master/packages/babel-plugin-transform-react-jsx-source\n  ...isDevelopment ? ['transform-react-jsx-source'] : [],\n\n  // Adds __self attribute to JSX which React will use for some warnings\n  // https://github.com/babel/babel/tree/master/packages/babel-plugin-transform-react-jsx-self\n  ...isDevelopment ? ['transform-react-jsx-self'] : [],\n];\n\nconst RHL_patch = isRHL ? ['react-hot-loader/patch'] : [];\n\nconst spa = generalWebpackConfig({\n  entry: isIsomorphic ? isomorphicEntry([\n    ...RHL_patch\n  ]) : spaEntry([\n    ...RHL_patch\n  ]),\n  rules: [\n    babelRules(\n      /\\.(jsx|js)?$/,\n      reactBabelPresets,\n      reactBabelPlugin,\n      babelEnvSpa,\n      [/node_modules/, /mobx.js/],\n    ),\n    internalCSS(),\n    externalCSS(),\n    file(),\n  ],\n  plugins: [\n    extractVendors(),\n    ...extractCSS(),\n    ...HMR(),\n    ...uglify(),\n    ...getAssetsFile(),\n    ...getIndexHtmlFile()\n  ],\n});\n\nconst server = generalWebpackConfig({\n  entry: serverEntry(),\n  target: 'node',\n  output: {\n    filename: filenameServer,\n    libraryTarget: 'commonjs2',\n  },\n  rules: [\n    // Override babel-preset-env configuration for Node.js\n    babelRules(\n      /\\.(js|jsx)?$/,\n      reactBabelPresets,\n      reactBabelPlugin,\n      babelEnvServer,\n    ),\n    internalCSS(),\n    externalCSS(),\n    file(),\n  ],\n  plugins: [\n\n    // Do not create separate chunks of the server bundle\n    // https://webpack.github.io/docs/list-of-plugins.html#limitchunkcountplugin\n    new webpack.optimize.LimitChunkCountPlugin({maxChunks: 1}),\n\n    // Adds a banner to the top of each generated chunk\n    // https://webpack.github.io/docs/list-of-plugins.html#bannerplugin\n    new webpack.BannerPlugin({\n      banner: 'require(\"source-map-support\").install();',\n      raw: true,\n      entryOnly: false,\n    }),\n  ],\n  externals: [\n    /^\\.\\/assets\\.json$/,\n    /^\\.\\/config\\.json$/,\n    nodeExternals({\n      whitelist: /\\.css/,\n    }),\n  ],\n  devtool: isDevelopment ? 'cheap-module-source-map' : 'source-map',\n  node: {\n    console: false,\n    global: false,\n    process: false,\n    Buffer: false,\n    __filename: false,\n    __dirname: false,\n  },\n});\n\nexport default isIsomorphic ? [spa, server] : spa;\n"]}