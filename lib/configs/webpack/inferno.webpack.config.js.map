{"version":3,"sources":["../../../src/configs/webpack/inferno.webpack.config.js"],"names":["spa","entry","rules","plugins","server","target","output","filename","libraryTarget","optimize","LimitChunkCountPlugin","maxChunks","BannerPlugin","banner","raw","entryOnly","externals","devtool","node","console","global","process","Buffer","__filename","__dirname"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;AAOA;;;;AACA;;AACA;;AACA;;AACA;;;;AACA;;AACA;;;;AAEA,MAAMA,MAAM,8BAAqB;AAC/BC,SAAO,kCAAe,6BAAf,GAAmC,sBADX;AAE/BC,SAAO,CACL,qBAAW,cAAX,EAA2B,EAA3B,EAA+B,CAAC,SAAD,CAA/B,kCAAyD,CAAC,cAAD,EAAiB,SAAjB,CAAzD,CADK,EAEL,wBAFK,EAGL,wBAHK,EAIL,kBAJK,CAFwB;AAQ/BC,WAAS,CACP,yBADO,EAEP,GAAG,sBAFI,EAGP,GAAG,cAHI,EAIP,GAAG,iBAJI,EAKP,GAAG,wBALI,EAMP,GAAG,2BANI;AARsB,CAArB,CAAZ;;AAkBA,MAAMC,SAAS,8BAAqB;AAClCH,SAAO,yBAD2B;AAElCI,UAAQ,MAF0B;AAGlCC,UAAQ;AACNC,+CADM;AAENC,mBAAe;AAFT,GAH0B;AAOlCN,SAAO;AACL;AACA,uBAAW,cAAX,EAA2B,EAA3B,EAA+B,CAAC,SAAD,CAA/B,oCAFK,EAGL,wBAHK,EAIL,wBAJK,EAKL,kBALK,CAP2B;AAclCC,WAAS;AACP;AACA;AACA,MAAI,kBAAQM,QAAR,CAAiBC,qBAArB,CAA2C,EAACC,WAAW,CAAZ,EAA3C,CAHO;;AAKP;AACA;AACA,MAAI,kBAAQC,YAAZ,CAAyB;AACvBC,YAAQ,0CADe;AAEvBC,SAAK,IAFkB;AAGvBC,eAAW;AAHY,GAAzB,CAPO,CAdyB;AA2BlCC,aAAW,CACT,oBADS,EAET,oBAFS,EAGT,qCAHS,CA3BuB;AAgClCC,WAAS,mCAAgB,yBAAhB,GAA4C,YAhCnB;AAiClCC,QAAM;AACJC,aAAS,KADL;AAEJC,YAAQ,KAFJ;AAGJC,aAAS,KAHL;AAIJC,YAAQ,KAJJ;AAKJC,gBAAY,KALR;AAMJC,eAAW;AANP;AAjC4B,CAArB,CAAf;;kBA2Ce,kCAAe,CAACxB,GAAD,EAAMI,MAAN,CAAf,GAA+BJ,G","file":"inferno.webpack.config.js","sourcesContent":["import webpack from 'webpack';\nimport nodeExternals from 'webpack-node-externals';\nimport {\n  babelEnvServer,\n  babelEnvSpa,\n  filenameServer,\n  isDevelopment,\n  isIsomorphic\n} from '../prepare.build-tools.config';\nimport generalWebpackConfig from './general.webpack.config';\nimport { isomorphicEntry, serverEntry, spaEntry } from './general/entry';\nimport { extractCSS } from './plugins/css';\nimport { extractVendors, getAssetsFile, getIndexHtmlFile, HMR, uglify } from './plugins/js';\nimport babelRules from './rules/babel';\nimport { externalCSS, internalCSS } from './rules/css';\nimport { file } from './rules/files';\n\nconst spa = generalWebpackConfig({\n  entry: isIsomorphic ? isomorphicEntry() : spaEntry(),\n  rules: [\n    babelRules(/\\.(jsx|js)?$/, [], ['inferno'], babelEnvSpa, [/node_modules/, /mobx.js/]),\n    internalCSS(),\n    externalCSS(),\n    file(),\n  ],\n  plugins: [\n    extractVendors(),\n    ...extractCSS(),\n    ...HMR(),\n    ...uglify(),\n    ...getAssetsFile(),\n    ...getIndexHtmlFile()\n  ],\n});\n\nconst server = generalWebpackConfig({\n  entry: serverEntry(),\n  target: 'node',\n  output: {\n    filename: filenameServer,\n    libraryTarget: 'commonjs2',\n  },\n  rules: [\n    // Override babel-preset-env configuration for Node.js\n    babelRules(/\\.(js|jsx)?$/, [], ['inferno'], babelEnvServer),\n    internalCSS(),\n    externalCSS(),\n    file(),\n  ],\n  plugins: [\n    // Do not create separate chunks of the server bundle\n    // https://webpack.github.io/docs/list-of-plugins.html#limitchunkcountplugin\n    new webpack.optimize.LimitChunkCountPlugin({maxChunks: 1}),\n\n    // Adds a banner to the top of each generated chunk\n    // https://webpack.github.io/docs/list-of-plugins.html#bannerplugin\n    new webpack.BannerPlugin({\n      banner: 'require(\"source-map-support\").install();',\n      raw: true,\n      entryOnly: false,\n    }),\n  ],\n  externals: [\n    /^\\.\\/assets\\.json$/,\n    /^\\.\\/config\\.json$/,\n    nodeExternals(),\n  ],\n  devtool: isDevelopment ? 'cheap-module-source-map' : 'source-map',\n  node: {\n    console: false,\n    global: false,\n    process: false,\n    Buffer: false,\n    __filename: false,\n    __dirname: false,\n  },\n});\n\nexport default isIsomorphic ? [spa, server] : spa;\n"]}