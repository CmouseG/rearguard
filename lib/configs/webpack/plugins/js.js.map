{"version":3,"sources":["../../../../src/configs/webpack/plugins/js.js"],"names":["HMR","HotModuleReplacementPlugin","NamedModulesPlugin","extractVendors","optimize","CommonsChunkPlugin","name","minChunks","module","test","resource","uglify","sourceMap","compress","screw_ie8","warnings","unused","dead_code","mangle","output","comments","analyze","defineEnv","DefinePlugin","NODE_ENV","DEBUG","__DEV__","__PROD__","__RHL__","getAssetsFile","path","filename","prettyPrint","getIndexHtmlFile","inject"],"mappings":";;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;AAUO,MAAMA,oBAAM,MAAM;AACvB,wCAAmB;AACjB,WAAO,CACL,IAAI,kBAAQC,0BAAZ,EADK;AAEL;;AAEA,QAAI,kBAAQC,kBAAZ,EAJK,CAAP;AAOD;;AAED,SAAO,EAAP;AACD,CAZM;;AAcP;AACO,MAAMC,0CAAiB,MAC5B,IAAI,kBAAQC,QAAR,CAAiBC,kBAArB,CAAwC;AACtCC,QAAM,QADgC;AAEtCC,aAAWC,UAAU,eAAeC,IAAf,CAAoBD,OAAOE,QAA3B;AAFiB,CAAxC,CADK;;AAOA,MAAMC,0BAAS,MAAM;AAC1B,uCAAkB;AAChB,WAAO;AACL;AACA,wCAAmB;AACjBC,iBAAW,IADM;AAEjBC,gBAAU;AACRC,mBAAW,IADH,EACS;AACjBC,8CAFQ;AAGRC,gBAAQ,IAHA;AAIRC,mBAAW;AAJH,OAFO;AAQjBC,cAAQ;AACNJ,mBAAW;AADL,OARS;AAWjBK,cAAQ;AACNC,kBAAU,KADJ;AAENN,mBAAW;AAFL;AAXS,KAAnB,CAFK,CAAP;AAmBD;;AAED,SAAO,EAAP;AACD,CAxBM;;AA0BP;AACA;AACO,MAAMO,4BAAU,MAAM;AAC3B,oCAAe;AACb,WAAO,CAAC,iDAAD,CAAP;AACD;;AAED,SAAO,EAAP;AACD,CANM;;AAQP;AACO,MAAMC,gCAAY,MACvB,IAAI,kBAAQC,YAAZ,CAAyB;AACvB,0BAAwB,uBAAIC,QADL;AAEvB,uBAAqB,uBAAIC,KAFF;AAGvBC,WAAS,uBAAIA,OAHU;AAIvBC,YAAU,uBAAIA,QAJS;AAKvBC,WAAS,uBAAIA;AALU,CAAzB,CADK;;AAUP;AACA;AACO,MAAMC,wCAAgB,MAAM;AACjC,uCAAkB;AAChB,WAAO,CACL,kCAAiB;AACfC,2CADe;AAEfC,gBAAU,aAFK;AAGfC,mBAAa;AAHE,KAAjB,CADK,CAAP;AAOD;;AAED,SAAO,EAAP;AACD,CAZM;AAaA,MAAMC,8CAAmB,MAAM;AACpC,MAAI,gCAAJ,EAAmB;AACjB,WAAO,CACL,gCAAsB;AACpBF,gBAAU,YADU;AAEpBG,cAAQ;AAFY,KAAtB,CADK,CAAP;AAMD;;AAED,SAAO,EAAP;AACD,CAXM","file":"js.js","sourcesContent":["import AssetsPlugin from 'assets-webpack-plugin';\nimport HtmlWebpackPlugin from 'html-webpack-plugin';\nimport UglifyJSPlugin from 'uglifyjs-webpack-plugin';\nimport webpack from 'webpack';\nimport { BundleAnalyzerPlugin } from 'webpack-bundle-analyzer';\nimport {\n  env,\n  isAnalyze,\n  isDevelopment,\n  isIsomorphic,\n  isProduction,\n  isVerbose,\n  outputServer\n} from '../../prepare.build-tools.config';\n\nexport const HMR = () => {\n  if (isDevelopment) {\n    return [\n      new webpack.HotModuleReplacementPlugin(),\n      // enable HMR globally\n\n      new webpack.NamedModulesPlugin(),\n      // prints more readable module names in the browser console on HMR updates\n    ];\n  }\n\n  return [];\n};\n\n// https://webpack.js.org/plugins/commons-chunk-plugin/\nexport const extractVendors = () => (\n  new webpack.optimize.CommonsChunkPlugin({\n    name: 'vendor',\n    minChunks: module => /node_modules/.test(module.resource),\n  })\n);\n\nexport const uglify = () => {\n  if (isProduction) {\n    return [\n      // https://webpack.js.org/plugins/uglifyjs-webpack-plugin/\n      new UglifyJSPlugin({\n        sourceMap: true,\n        compress: {\n          screw_ie8: true, // React doesn't support IE8\n          warnings: isVerbose,\n          unused: true,\n          dead_code: true,\n        },\n        mangle: {\n          screw_ie8: true,\n        },\n        output: {\n          comments: false,\n          screw_ie8: true,\n        },\n      }),\n    ];\n  }\n\n  return [];\n};\n\n// Webpack Bundle Analyzer\n// https://github.com/th0r/webpack-bundle-analyzer\nexport const analyze = () => {\n  if (isAnalyze) {\n    return [new BundleAnalyzerPlugin()];\n  }\n\n  return [];\n};\n\n// https://webpack.js.org/plugins/define-plugin/\nexport const defineEnv = () => (\n  new webpack.DefinePlugin({\n    'process.env.NODE_ENV': env.NODE_ENV,\n    'process.env.DEBUG': env.DEBUG,\n    __DEV__: env.__DEV__,\n    __PROD__: env.__PROD__,\n    __RHL__: env.__RHL__,\n  })\n);\n\n// Emit a file with assets paths\n// https://github.com/sporto/assets-webpack-plugin#options\nexport const getAssetsFile = () => {\n  if (isIsomorphic) {\n    return [\n      new AssetsPlugin({\n        path: outputServer,\n        filename: 'assets.json',\n        prettyPrint: true,\n      }),\n    ];\n  }\n\n  return [];\n};\nexport const getIndexHtmlFile = () => {\n  if (!isIsomorphic) {\n    return [\n      new HtmlWebpackPlugin({\n        filename: 'index.html',\n        inject: 'head',\n      }),\n    ];\n  }\n\n  return [];\n};\n"]}