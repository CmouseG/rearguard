{"version":3,"sources":["../../src/tools/run.js"],"names":["format","time","toTimeString","replace","run","fn","options","task","default","start","Date","console","info","name","then","resolution","end","getTime","catch","error"],"mappings":";;;;;QAAgBA,M,GAAAA,M;AAAT,SAASA,MAAT,CAAiBC,IAAjB,EAAuB;AAC5B,SAAOA,KAAKC,YAAL,GAAoBC,OAApB,CAA4B,yBAA5B,EAAuD,IAAvD,CAAP;AACD;;AAED,SAASC,GAAT,CAAcC,EAAd,EAAkBC,OAAlB,EAA2B;AACzB,QAAMC,OAAO,OAAOF,GAAGG,OAAV,KAAsB,WAAtB,GAAoCH,EAApC,GAAyCA,GAAGG,OAAzD;AACA,QAAMC,QAAQ,IAAIC,IAAJ,EAAd;AACAC,UAAQC,IAAR,CACG,IAAGZ,OAAOS,KAAP,CAAc,eAAcF,KAAKM,IAAK,GAAEP,UAAW,KAAIA,OAAQ,GAAvB,GAA4B,EAAG,MAD7E;AAGA,SAAOC,KAAKD,OAAL,EACNQ,IADM,CACAC,UAAD,IAAgB;AACpB,UAAMC,MAAM,IAAIN,IAAJ,EAAZ;AACA,UAAMT,OAAOe,IAAIC,OAAJ,KAAgBR,MAAMQ,OAAN,EAA7B;AACAN,YAAQC,IAAR,CACG,IAAGZ,OAAOgB,GAAP,CAAY,eAAcT,KAAKM,IAAK,GAAEP,UAAW,KAAIA,OAAQ,GAAvB,GAA4B,EAAG,WAAUL,IAAK,KAD1F;AAGA,WAAOc,UAAP;AACD,GARM,EASNG,KATM,CASCC,KAAD,IAAW;AAChBR,YAAQQ,KAAR,CAAcA,KAAd;AACA,WAAOA,KAAP;AACD,GAZM,CAAP;AAaD;;kBAEcf,G","file":"run.js","sourcesContent":["export function format (time) {\n  return time.toTimeString().replace(/.*(\\d{2}:\\d{2}:\\d{2}).*/, '$1');\n}\n\nfunction run (fn, options) {\n  const task = typeof fn.default === 'undefined' ? fn : fn.default;\n  const start = new Date();\n  console.info(\n    `[${format(start)}] Starting '${task.name}${options ? ` (${options})` : ''}'...`,\n  );\n  return task(options)\n  .then((resolution) => {\n    const end = new Date();\n    const time = end.getTime() - start.getTime();\n    console.info(\n      `[${format(end)}] Finished '${task.name}${options ? ` (${options})` : ''}' after ${time} ms`,\n    );\n    return resolution;\n  })\n  .catch((error) => {\n    console.error(error);\n    return error;\n  });\n}\n\nexport default run;\n"]}